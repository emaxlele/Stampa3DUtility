<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Preventivo Stampa 3D ‚Äî Bambu Lab H2C</title>

<style>
:root{
  --bg:#0f172a;
  --card:#111827;
  --border:#1f2937;
  --muted:#9ca3af;
  --primary:#60a5fa;
}
body{
  margin:0;
  background:var(--bg);
  color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}
.wrap{max-width:900px;margin:2rem auto;padding:0 1rem}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1.2rem}
h1{margin:0 0 1rem}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
@media(max-width:700px){.grid{grid-template-columns:1fr}}
label{display:block;margin-top:.6rem}
input,select{
  width:100%;
  padding:.55rem;
  margin-top:.25rem;
  background:#0b1220;
  color:#fff;
  border:1px solid var(--border);
  border-radius:8px;
}
.btn{
  padding:.6rem .9rem;
  border-radius:10px;
  border:1px solid var(--border);
  background:#0b1220;
  color:#fff;
  cursor:pointer;
}
.btn.primary{background:var(--primary);color:#001c32;border:none;font-weight:700}
.actions{display:flex;gap:.7rem;flex-wrap:wrap;margin-top:1rem}
.total{font-size:1.3rem;font-weight:800;margin-top:1rem}
.break{
  background:#0b1220;
  border:1px solid var(--border);
  border-radius:10px;
  padding:.8rem;
  margin-top:.8rem;
  white-space:pre-wrap;
}
.footer{font-size:.85rem;color:#9ca3af;margin-top:1rem}

@media print{
  .actions,.footer{display:none}
  body{background:#fff;color:#000}
  .card,.break{border-color:#ccc;background:#fff}
}
</style>
</head>

<body>
<div class="wrap">
<h1>Preventivo Stampa 3D ‚Äî Bambu Lab H2C</h1>

<div class="card">

<div class="grid">
  <div>
    <label>Tipo utilizzo</label>
    <select id="mode">
      <option value="hobby">Uso personale / hobby</option>
      <option value="pro">Vendita / commerciale</option>
    </select>
  </div>
  <div>
    <label>Tariffa oraria ‚Ç¨/h</label>
    <input id="rate" type="number" disabled>
  </div>
</div>

<div class="grid">
  <div>
    <label>Grammi materiale</label>
    <input id="grams" type="number" min="0" value="50">
  </div>
  <div>
    <label>Prezzo bobina ‚Ç¨/kg</label>
    <input id="ppg" type="number" value="25">
  </div>
</div>

<div class="grid">
  <div>
    <label>Ore</label>
    <input id="hours" type="number" min="0" value="1">
  </div>
  <div>
    <label>Minuti</label>
    <input id="minutes" type="number" min="0" max="59" value="0">
  </div>
</div>

<div>
  <label>Esito stampa</label>
  <select id="failure">
    <option value="none">Stampa riuscita</option>
    <option value="file">Errore file fornito</option>
    <option value="technical">Problema tecnico</option>
  </select>
</div>

<div class="actions">
  <button class="btn primary" id="calc">Calcola</button>
  <button class="btn" onclick="window.print()">Stampa / PDF</button>
</div>

<div class="total" id="total">Totale: ‚Äî</div>
<div class="break" id="breakdown">Inserisci i dati e premi ‚ÄúCalcola‚Äù.</div>

</div>

<div class="actions">
  <button class="btn" id="rulesBtn">üìú Regolamento</button>
</div>

<div id="rulesBox" class="break" style="display:none">
REGOLAMENTO DI UTILIZZO ‚Äì SERVIZIO DI STAMPA 3D

Il prezzo √® calcolato automaticamente in base a materiale, tempo di stampa e avviamento della lavorazione.
Il prezzo visualizzato rappresenta il corrispettivo finale del servizio.

In caso di esito negativo dovuto a errori nel file fornito, i costi gi√† sostenuti restano validi.
In caso di problemi tecnici imputabili al servizio, la stampa viene ripetuta senza costi aggiuntivi.

L‚Äôutilizzo del tool implica l‚Äôaccettazione del presente regolamento.
</div>

</div>

<script>
const el = id => document.getElementById(id);
const euro = v => "‚Ç¨ " + v.toFixed(2);

function updateRate(){
  el("rate").value = el("mode").value === "pro" ? 1.25 : 0.75;
}

function calc(){
  const grams = +el("grams").value;
  const ppg = +el("ppg").value / 1000;
  const hours = +el("hours").value + (+el("minutes").value / 60);
  const rate = +el("rate").value;

  const material = grams * ppg;
  const timeCost = hours * rate;
  let total = material + timeCost;

  const min = el("mode").value === "pro" ? 8 : 5;
  const appliedMin = total < min ? min : total;

  el("total").textContent = "Totale: " + euro(appliedMin);

  el("breakdown").textContent =
    `Materiale: ${euro(material)}
Tempo di stampa: ${euro(timeCost)}
Totale calcolato: ${euro(total)}
Minimo applicato: ${total < min ? euro(min) : "‚Äî"}
Totale finale: ${euro(appliedMin)}`;
}

el("mode").addEventListener("change", updateRate);
el("calc").addEventListener("click", calc);

updateRate();

const rulesBtn = el("rulesBtn");
const rulesBox = el("rulesBox");
rulesBtn.addEventListener("click", () => {
  const open = rulesBox.style.display === "block";
  rulesBox.style.display = open ? "none" : "block";
});
</script>

</body>
</html>
